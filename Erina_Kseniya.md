# Руководство по работе с Git.
**Контроль версий**
==

**Контроль версий** - практика, которая позволяет отслеживать изменения исходного кода и управлять ими. 
Самая распростроненная система контроля версий это Git.
Контроль версий необходим, чтобы:

* хранить разные версии проекта
* возвращаться к разным версиям проекта


**Git** - это консольная утилита, для отслеживания и введения истории изменения файлов проекте.
**Репозиторием** называют хранилище(папка) кода и историю его изменений.

#### Настройка Git.

Перед первым использованием Git необходимо представиться системе. Делается это один раз. Для этого необходимо в терминале ввести следующие команды:

* *git config --global [user.name](https://github.com/MoraKsu) "ваше_имя"*
* *git config --global user.email "адрес_почты@email.com"*

Данные настройки необходимы, чтобы в дальнейшем коллеги могли видеть кто делал изменения и коммиты, и куда можно писать, чтобы связаться с автором.

#### Основные команды Git.

* *git init* - инициализация (создание репозитория). Необходимо указать папку, в которой git будет отслеживать изменения. В папке создается скрытая папка .git
* *git status* - команда, отображающая текущее состояние репозитория
* *git --version* - проверка текущей версии git
* *git add <имя файла>* - добавляет содержимое рабочего каталога. Обязательно делается перед коммитом

  >Нажатие клавиши **tab** переключает имя файлов/папок, имеющиеся в репозитории

* *git commit -m "комментарий"* - фиксирует, сохраняет изменения с комментарием какие изменения были внесены
* *clear* - очищает поле терминала
* *git log* - журнал изменений, используется перед переключением версий файла
  >Нажатие клавиши **q** возвращает в исходное окно терминала
* *git checkout <индификатор коммита>* - переключение между версиями
* *git checkout master* - возвращает в версюю файла, в котором изначально работали
* *git diff* - показывает разницу между текущим файлом и сохраненным, перед командой используется команда **git log**

  >С помощью стрелок на клавиатуре можно переключаться между уже использованными командами ранее

#### Правило четырех шагов.

1. Этап внесение изменений в файл.
2. Этап сохранение файла.
3. Этап добавление файла в отслеживание.
4. Этап добавление коммита.

#### Алгоритм работы.

1. Создаем рабочую папку, где будут храниться все необходимые файлы. Имя папки и файлов указываем латиницей.
2. Заходим в редактор кода.
3. Открываем рабочую папку.
4. Создаем репозиторий, инициализируем папку с помощью команды git init.
5. Создаем необходимые файлы, с нужным расширением.
6. Далее работаем по правилу 4 шагов:
* вносим изменения
* сохраняем
* добавляем в отслеживание
* добавляем коммит

## Ветвление в Git.
---
Ветки позволяют легко управлять черновиками и чистовиками в Git.
Ветвление стало неотъемлемой частью командной разработки, потому что оно дает возможность работать над разными версиями исходного кода. Основной идеей ветвления является отклонение от основного кода и продолжение работы независимо от него. Также это удобно в тестировании отдельного функционала, потому что позволяет работать над новой частью кода, не беспокоясь о поломке чего-то в рабочей версии.

Имя основной ветки Git-проекта по умолчанию — master (однако зачастую бывает main, например, в GitHub).

Для начала структурируем файл, выделяя блоки, которые впоследствии будут редактироваться в ветках.
## Создание и переключение веток Git.
---
* *git branch* - показывает список веток и <*> указывает на которой ветке сейчас находимся
* *git branch имя_ветки* - создает новую ветку
* *git checkout имя_ветки* - переход на нужную ветку

Чтобы сразу перейти на новую ветку можно объединить две команды:
* *git checkout branch имя_ветки*
И также мы получим тот же результат при использовании git checkout с ключом -b:
* *git checkout -b имя_ветки*

>Необходимо обязательно проверять на какой ветке идет работа, своевременно сохранять и коммитить
## Основы слияния веток Git.
---
* *git merge имя_ветки* - перенос изменений с одной ветки на другую. Команда используется из той ветки (основной/главной) куда собираемся слить отредактированную (черновик) ветку.
* *git branch -d имя_ветки* - удаление слитой ветки, если она больше не нужна
* *git log —graph* - графическое отображение коммитов
## Тонкости слияния, конфликты
---
Всё, где есть неразрешённые конфликты слияния, перечисляется как неслитое. В конфликтующие файлы Git добавляет специальные маркеры конфликтов, чтобы можно было исправить их вручную.

* *fast-forward* -  метод слияния, при котором основная ветка не изменялась, быстрое слияние

* *auto-merging ‘ort’ strategy* - метод слияния, в котором в каждой из веток были свои коммиты, которые не противоречат друг другу. Создается автоматический коммит

Иногда процесс не проходит гладко. Если вы изменили одну и ту же часть одного и того же файла по-разному в двух объединяемых ветках, Git не сможет их чисто объединить и выдаст конфликт слияния:

* *Auto-merging* 
  *CONFLICT (content): Merge conflict*

В этом случае необходимо разрешить конфликт, можно сделать это несколькими методами:
- редактор слияния
- с помощью подсказок VS Code (оставить изменения основной ветки, оставить изменения слитой ветки, оставить оба изменения)
- вручную

При конфликте слияния автоматический коммит не создается, поэтому необходимо его добавить вручную.
## Алгоритм выполнения
---
1. Создаем рабочую папку, где будут храниться все необходимые файлы.
2. Заходим в редактор кода.
3. Открываем рабочую папку.
4. Создаем репозиторий, инициализируем папку с помощью команды *git init*.
5. Создаем необходимые файлы, с нужным расширением.
6. Структурируем файлы.
7. Создаем новые ветки согласно структуре командой *git branch <имя ветки>*.
8. Переходим в нужную ветку с помощью команды *git checkout <имя ветки>*.
9. Вносим изменения в ветке, работаем по принципу 4 шагов.
10. Когда работа с веткой закончена, переходим в основную и выполняем слияние с помощью команды *git merge <имя ветки>*.

## Работа с удаленными репозиториями.
---
Разграничение понятий **Git** и **GitHub**:

**Git** - одна из систем контроля версий

**GitHub** - сервис компании Майкрософт для организации работы удаленных репозиториев. Самый популярный сервис *Git*. Имеет много полезных функций и огромный архив различного кода.

Если требуется начать работать с репозиторием, в какой-то стадии готовности, на удаленном ресурсе, необходимо клонировать (скачать его) на свой локальный компьютер. Это делается для того, чтобы оригинал версии репозитория без согласования правок не затрагивался. Выполняется следующая команда:

* *git clone <url репозитория>* - клонирование репозитория на локальный комьютер с которого работаете

Команда *git clone* составная: она не только загружает все изменения, но и пытается слить все ветки на локальном компьютере и в удаленном репозитории

* *git pull* - скачивает все из вешнего (удаленного) репозитория на локальный

* *git push* - скачивает из локального в удаленный репозиторий (авторизация на сервисе должна быть пройдена)

__*Как настроить совместную работу:*__

1. Создать аккаунт на [GitHub.com](https://github.com/)
2. Создать локальный репозиторий
3. Подружить локальный и удаленный репозиторий, следуя подсказкам на **GitHab**
4. Отправить *push* на локальный репозиторий
5. Провести изменения “с другого компьютера”
6. Выкачить *pull* актуальное состаяние из удаленного репозитория

* *pull request* - команда для предложения изменений, запрос на влияние изменений в репозиторий. Предлагать изменения нужно в отдельной ветке. Сначала мы копируем репозиторий на свой ПК, делаем fork репозитория, затем клонируем версию на своем ПК, создаем ветку с изменениями, отправляем изменения командой push на удаленный репозиторий и командой pull request предлагаем слияния изменений владельцу оригинального репозитория.

__*Pull request:*__
1. Делаем *fork* (ответвление)
2. Делаем *git clone*
3. Создаем ветку и в нее вносим изменения
4. Фиксируем изменения
5. Отправляем свою версию на **GitHub**
6. На сайте **GitHub** нажимаем кнопку *pull request*